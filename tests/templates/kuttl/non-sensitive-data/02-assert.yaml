---
apiVersion: kuttl.dev/v1beta1
kind: TestAssert
timeout: 10
commands:
  # Ensure that the Pod comes up
  - script: kubectl wait --for=condition=Ready pod/secret-consumer-$NAMESPACE --namespace "$NAMESPACE" --timeout 60s
  # Ensure there is only a single file in the target directory
  - script: kubectl exec secret-consumer-$NAMESPACE --namespace "$NAMESPACE" -- bash -c 'if [ $(ls -p /stackable/ca | grep -v / | wc -l) = "1" ]; then echo "Success"; else exit 1; fi'
